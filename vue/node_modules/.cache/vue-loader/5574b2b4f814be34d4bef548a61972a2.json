{"remainingRequest":"F:\\vuetest\\giteecode\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\vuetest\\giteecode\\src\\views\\Transfer.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\vuetest\\giteecode\\src\\views\\Transfer.vue","mtime":1703141842274},{"path":"F:\\vuetest\\giteecode\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1703142396770},{"path":"F:\\vuetest\\giteecode\\node_modules\\babel-loader\\lib\\index.js","mtime":1703142397738},{"path":"F:\\vuetest\\giteecode\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1703142396770},{"path":"F:\\vuetest\\giteecode\\node_modules\\vue-loader\\lib\\index.js","mtime":1703142398122}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgcXMgZnJvbSAicXMiOw0KaW1wb3J0IHsgZ2V0TW9uZXkgfSBmcm9tICJAL2FwaS9jb21tb24iOw0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICB0b0FjY291bnQ6ICIiLA0KICAgICAgbW9uZXk6ICIiLA0KICAgICAgcGFzc3dvcmQ6ICIiLA0KICAgICAgY2FyZG5vOiAiIiwNCiAgICAgIGNhbnN1Ym1pdDogZmFsc2UsDQogICAgICBpZDogIiIsDQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIFRyYW5zZmVyVG9BY2NvdW50KCkgew0KICAgICAgdmFyIHBhcmFtcyA9IHsNCiAgICAgICAgdG9BY2NvdW50OiB0aGlzLnRvQWNjb3VudCwNCiAgICAgIH07DQogICAgICB2YXIgZGF0YSA9IHFzLnN0cmluZ2lmeShwYXJhbXMpOw0KICAgICAgdGhpcy4kYXhpb3MNCiAgICAgICAgLnBvc3QoImh0dHA6Ly8xMjcuMC4wLjE6ODA4MC9CYW5rVHJhbnNmZXIvZ2V0VG9BY2NvdW50IiwgZGF0YSkNCiAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIHZhciBsZW4gPSByZXMuZGF0YS5sZW5ndGg7DQogICAgICAgICAgaWYgKGxlbiA+IDApIHsNCiAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgcmVzLmRhdGEgPT0gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ1c2VyIikpLnJlYWxuYW1lDQogICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihg5LiN5Y+v5Lul57uZ6Ieq5bex6L2s6LSm5ZOmYCk7DQogICAgICAgICAgICAgIHRoaXMuY2Fuc3VibWl0ID0gZmFsc2U7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKA0KICAgICAgICAgICAgICAgIGDovazlhaXotKbmiLfnnJ/lrp7lkI3lrZfvvJokeyIqIi5yZXBlYXQobGVuIC0gMil9JHtyZXMuZGF0YS5zdWJzdHIoDQogICAgICAgICAgICAgICAgICBsZW4gLSAyLA0KICAgICAgICAgICAgICAgICAgMg0KICAgICAgICAgICAgICAgICl9YA0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICB0aGlzLmNhbnN1Ym1pdCA9IHRydWU7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoYOi9rOWHuui0puaIt+S4jeWtmOWcqGApOw0KICAgICAgICAgICAgdGhpcy5jYW5zdWJtaXQgPSBmYWxzZTsNCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgdHJhbnNmZXIoKSB7DQogICAgICBpZiAoDQogICAgICAgIEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidXNlciIpKS5wYXNzd29yZCA9PQ0KICAgICAgICAgIHRoaXMucGFzc3dvcmQudHJpbSgpICYmDQogICAgICAgIHRoaXMuY2Fuc3VibWl0ICYmDQogICAgICAgIHRoaXMubW9uZXkgPiAwDQogICAgICApIHsNCiAgICAgICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLm1vbmV5IC0gdGhpcy5tb25leSA8IDApIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwNCiAgICAgICAgICAgIG1lc3NhZ2U6ICLkvZnpop3kuI3otrMiLA0KICAgICAgICAgICAgdHlwZTogIndhcm5pbmciLA0KICAgICAgICAgIH0pOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHZhciBwYXJhbXMgPSB7DQogICAgICAgICAgICB0b0FjY291bnQ6IHRoaXMudG9BY2NvdW50LnRyaW0oKSwNCiAgICAgICAgICAgIG1vbmV5OiB0aGlzLm1vbmV5LnRyaW0oKSwNCiAgICAgICAgICAgIGNhcmRubzogdGhpcy5jYXJkbm8sDQogICAgICAgICAgICBpZDogdGhpcy5pZCwNCiAgICAgICAgICB9Ow0KICAgICAgICAgIHZhciBkYXRhID0gcXMuc3RyaW5naWZ5KHBhcmFtcyk7DQogICAgICAgICAgdGhpcy4kYXhpb3MNCiAgICAgICAgICAgIC5wb3N0KCJodHRwOi8vMTI3LjAuMC4xOjgwODAvQmFua1RyYW5zZmVyL3RyYW5zZmVyIiwgZGF0YSkNCiAgICAgICAgICAgIC50aGVuKA0KICAgICAgICAgICAgICBmdW5jdGlvbihyZXMpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOw0KICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIui9rOi0puaIkOWKnyIsDQogICAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgZ2V0TW9uZXkodGhpcyk7DQogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9iaWxsIik7DQogICAgICAgICAgICAgIH0uYmluZCh0aGlzKQ0KICAgICAgICAgICAgKQ0KICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHsNCiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLA0KICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLor7fph43or5UiLA0KICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsDQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwNCiAgICAgICAgICBtZXNzYWdlOiAi6K+36YeN6K+VIiwNCiAgICAgICAgICB0eXBlOiAiZXJyb3IiLA0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMuaWQgPSBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInVzZXIiKSkuaWQ7DQogICAgdmFyIHBhcmFtcyA9IHsNCiAgICAgIGlkOiB0aGlzLmlkLA0KICAgIH07DQogICAgdmFyIGRhdGEgPSBxcy5zdHJpbmdpZnkocGFyYW1zKTsNCiAgICB0aGlzLiRheGlvcw0KICAgICAgLnBvc3QoImh0dHA6Ly8xMjcuMC4wLjE6ODA4MC9CYW5rVHJhbnNmZXIvZ2V0Q2FyZE5vIiwgZGF0YSkNCiAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgdGhpcy5jYXJkbm8gPSByZXMuZGF0YTsNCiAgICAgIH0pOw0KICB9LA0KfTsNCg=="},{"version":3,"sources":["Transfer.vue"],"names":[],"mappings":";AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Transfer.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div id=\"transfer\">\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"9\">\r\n        <el-input placeholder=\"我的账户\" v-model=\"cardno\" :disabled=\"true\">\r\n        </el-input>\r\n        <el-input\r\n          v-model=\"toAccount\"\r\n          placeholder=\"转出账户\"\r\n          @blur=\"TransferToAccount\"\r\n        ></el-input>\r\n        <el-input v-model=\"money\" placeholder=\"转出金额\"></el-input>\r\n        <el-input\r\n          placeholder=\"请输入密码\"\r\n          v-model=\"password\"\r\n          show-password\r\n        ></el-input>\r\n        <el-button type=\"primary\" plain @click=\"transfer\">action</el-button>\r\n      </el-col></el-row\r\n    >\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport qs from \"qs\";\r\nimport { getMoney } from \"@/api/common\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      toAccount: \"\",\r\n      money: \"\",\r\n      password: \"\",\r\n      cardno: \"\",\r\n      cansubmit: false,\r\n      id: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    TransferToAccount() {\r\n      var params = {\r\n        toAccount: this.toAccount,\r\n      };\r\n      var data = qs.stringify(params);\r\n      this.$axios\r\n        .post(\"http://127.0.0.1:8080/BankTransfer/getToAccount\", data)\r\n        .then((res) => {\r\n          var len = res.data.length;\r\n          if (len > 0) {\r\n            if (\r\n              res.data == JSON.parse(sessionStorage.getItem(\"user\")).realname\r\n            ) {\r\n              this.$message.error(`不可以给自己转账哦`);\r\n              this.cansubmit = false;\r\n            } else {\r\n              this.$message(\r\n                `转入账户真实名字：${\"*\".repeat(len - 2)}${res.data.substr(\r\n                  len - 2,\r\n                  2\r\n                )}`\r\n              );\r\n              this.cansubmit = true;\r\n            }\r\n          } else {\r\n            this.$message.error(`转出账户不存在`);\r\n            this.cansubmit = false;\r\n          }\r\n        });\r\n    },\r\n    transfer() {\r\n      if (\r\n        JSON.parse(sessionStorage.getItem(\"user\")).password ==\r\n          this.password.trim() &&\r\n        this.cansubmit &&\r\n        this.money > 0\r\n      ) {\r\n        if (this.$store.state.money - this.money < 0) {\r\n          this.$message({\r\n            showClose: true,\r\n            message: \"余额不足\",\r\n            type: \"warning\",\r\n          });\r\n        } else {\r\n          var params = {\r\n            toAccount: this.toAccount.trim(),\r\n            money: this.money.trim(),\r\n            cardno: this.cardno,\r\n            id: this.id,\r\n          };\r\n          var data = qs.stringify(params);\r\n          this.$axios\r\n            .post(\"http://127.0.0.1:8080/BankTransfer/transfer\", data)\r\n            .then(\r\n              function(res) {\r\n                console.log(res);\r\n                this.$message({\r\n                  showClose: true,\r\n                  message: \"转账成功\",\r\n                  type: \"success\",\r\n                });\r\n                getMoney(this);\r\n                this.$router.push(\"/bill\");\r\n              }.bind(this)\r\n            )\r\n            .catch((err) => {\r\n              this.$message({\r\n                showClose: true,\r\n                message: \"请重试\",\r\n                type: \"error\",\r\n              });\r\n            });\r\n        }\r\n      } else {\r\n        this.$message({\r\n          showClose: true,\r\n          message: \"请重试\",\r\n          type: \"error\",\r\n        });\r\n      }\r\n    },\r\n  },\r\n  created() {\r\n    this.id = JSON.parse(sessionStorage.getItem(\"user\")).id;\r\n    var params = {\r\n      id: this.id,\r\n    };\r\n    var data = qs.stringify(params);\r\n    this.$axios\r\n      .post(\"http://127.0.0.1:8080/BankTransfer/getCardNo\", data)\r\n      .then((res) => {\r\n        this.cardno = res.data;\r\n      });\r\n  },\r\n};\r\n</script>\r\n\r\n<style></style>\r\n"]}]}